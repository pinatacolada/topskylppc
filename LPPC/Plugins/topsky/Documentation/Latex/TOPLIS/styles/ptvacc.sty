\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{styles/ptvacc}
  [2022/11/22 v1.01 Portugal vACC Manuals LaTeX package]

\AddToHook{cmd/section/before}{\clearpage}
\RequirePackage[utf8]{inputenc}
\RequirePackage[T1]{fontenc}
\RequirePackage{microtype}
\RequirePackage[dvips]{graphicx}
\RequirePackage{bookman}
\RequirePackage{graphicx}
\RequirePackage[usestackEOL]{stackengine}
\RequirePackage[percent]{overpic}
\RequirePackage{amssymb}
\RequirePackage{xcolor,framed,marginnote,blindtext}
\RequirePackage[british]{babel}
\RequirePackage{longtable}
\RequirePackage{pdflscape}
\RequirePackage{makecell}
\RequirePackage{colortbl}
\RequirePackage{array}
\RequirePackage{csquotes}
\RequirePackage{nicematrix,tikz}
\RequirePackage{stix}
\RequirePackage{tabularray}
\RequirePackage[useregional]{datetime2}
\RequirePackage{xstring}
\RequirePackage{enumitem}
\RequirePackage[export]{adjustbox}
\RequirePackage{utfsym}
\RequirePackage{multirow}
\RequirePackage{float}
\RequirePackage{sidecap}
\RequirePackage{graphicx,capt-of}
\RequirePackage{biblatex}
\addbibresource{refs.bib}
\RequirePackage{microtype}
\RequirePackage{cellspace}
\setlength\cellspacetoplimit{4pt}
\setlength\cellspacebottomlimit{4pt}
\RequirePackage[scaled]{helvet}
\RequirePackage[flushleft]{threeparttable}
\RequirePackage{etoc}

\renewcommand\familydefault{\sfdefault} 
\renewcommand*{\arraystretch}{1.6}

\newcommand\setdocsubject[1]{\def\docsubject{#1}}
\newcommand\setdoctitle[1]{\def\doctitle{#1}}
\newcommand\setcoverdesc[1]{\def\coverdesc{#1}}
\newcommand\setdocrevision[1]{\def\docrevision{#1}}

\newcounter{rowcounter}
\newcommand{\nextrow}{\refstepcounter{rowcounter}}
\newcommand{\rev}{Rev.\docrevision}
\newcommand{\colorref}[1]{\colorbox{Flight Highlight}{\color{#1}#1}}
\newcommand{\colortabex}[1]{\cellcolor{Flight Highlight}\color{#1}\colorref{#1}}
\newcommand{\colortab}[1]{\cellcolor{Flight Highlight}\color{#1}}
\newcommand{\tagref}[1]{\textit{\hyperref[#1]{\StrDel{#1}{tag:}}}}
\newcommand{\stateref}[1]{\textit{\hyperref[state:#1]{#1}}}
\newcommand{\winref}[1]{\textit{\titleref{#1}}}
\newcommand{\image}[1]{\includegraphics[max height=10cm,max width=\textwidth]{#1}}
\newcommand{\drawtag}[3]{\node[draw,red,minimum height=0.55cm,minimum width=#1] at (#2) (#3) {}}
\newcommand{\drawtagdesc}[4]{\node[draw,black,thick,text width=#1] at (#2) (#3) {#4};}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\newcommand{\headerformat}{%
  {%
\begin{tabularx}{\textwidth}{|>{\centering\arraybackslash\hsize=0.2\hsize}X|>{\centering\arraybackslash\hsize=0.65\hsize}X|>{\centering\arraybackslash\hsize=0.15\hsize}X|}
    \hline
    \raisebox{-0.5\height}{\includegraphics[max height=0.5\headheight,max width=0.15\textwidth]{styles/logo.png}} & \textbf{\large{\leftmark}} & \textbf{\large{\thesection}}  \\
    \scriptsize{\docsubject\space\doctitle}             & \rightmark         & \small{P\thepage}\         \\
    \hline
    \end{tabularx}%
}%
}

\newcommand\capdimage[2]{
\begin{center}
\hspace{1em}%
\vtop{%
\centering
\includegraphics[max height=8cm,max width=8cm]{#1}%
\captionof{figure}{#2}%
}%
\end{center}
\ignorespaces}

\newcolumntype{t}{>{\tt}c}

\colorlet{shadecolor}{gray!20}

\makeatletter
\def\maxwidth#1{\ifdim\Gin@nat@width>#1 #1\else\Gin@nat@width\fi}
\makeatother

\newcommand{\warn}[1]{
  \begin{center}
    
    \begin{tabular}{| P{1.5cm}|p{10.5cm} |}
      \hline
      \cellcolor{shadecolor}\colorbox{red}{\color{white}Warning} &\cellcolor{shadecolor} #1 \\ \hline
    \end{tabular}
  \end{center}
}

\newcommand{\note}[1]{
  \begin{center}
    
    \begin{tabular}{| P{1.5cm}|p{10.5cm} |}
      \hline
      \cellcolor{shadecolor}\colorbox{gray}{\color{white}Note} &\cellcolor{shadecolor} #1 \\ \hline
    \end{tabular}
  \end{center}
}

\def\startphrasex{%
\begin{longtable}{|p{0.49\textwidth}|p{0.49\textwidth}|}
  \hline
  \textbf{ATC}                                 &   \textbf{Aircraft}        \\ \hline
  \endhead}

\def\endphrasex{\end{longtable}}

\newcommand{\phrasexrow}[2]{#1 & #2 \\ \hline}

\def\lppcspeedres{%
\begin{longtable}{|p{0.49\textwidth}|p{0.49\textwidth}|}
  \hline
  \textbf{Phase}  &   \textbf{Speed}            \\ \hline
  \endhead
  FL245-FL100   & MAX IAS 280 kts               \\ \hline
  FL100-FL070   & MAX IAS 250 kts               \\ \hline
  FL070-4000FT  & MAX IAS 220 KTS               \\ \hline
  Below 4000FT  & MAX IAS 200 KTS               \\ \hline
  Final segment & MAX IAS 180-160 KTS           \\ \hline
  4 NM          & 160 KTS and reducing to Vapp  \\ \hline
\end{longtable}
}

\def\lppcspeedreduction{%
\begin{longtable}{|p{0.49\textwidth}|p{0.49\textwidth}|}
  \hline
  \textbf{Phase}  &   \textbf{Minimum Assignable Speed} \\ \hline
  \endhead
  FL250       & 250kts                        \\ \hline
  FL150       & 220kts/Minimum Clean Speed    \\ \hline
  FL60        & 180kts                        \\ \hline
  4000FT/FAP  & 160kts/Minimum Approach Speed \\ \hline
\end{longtable}
}

\newcommand{\aortab}[4]{%
\begin{figure}[H]
  \begin{minipage}[c]{70mm}
      \includegraphics[max height=\textheight,max width=70mm]{#1}
  \end{minipage}
  \hfil
  \begin{minipage}[c]{80mm}
      \begin{tblr}{
          width=\textwidth,
          colspec = {Q[58mm,l]Q[14mm,c]},
          rowspec = {|Q[b]|Q[m]},
          vline{1-3} = {1-2}{},
          hline{1-3} = {1-2}{},
          }
          \textbf{Lateral Limits} & \textbf{Vertical Limits}  \\
          \footnotesize{#2}                      & #3 --------- #4 \\     
      \end{tblr}
      \label{asp:fir}
  \end{minipage}
\end{figure}
}

\newcommand{\rrtab}[3]{%
\begin{table}[H]
  \begin{minipage}[b]{75mm}
      \centering
      \raisebox{-0.5\height}{\includegraphics[width=75mm]{#1}}
  \end{minipage}
  \begin{minipage}[b]{75mm}
      \begin{tabular}{ | p{40mm} | p{35mm} |}
          \hline
          \textbf{Route}      & \textbf{Goal} \\ \hline
          #2   & #3 \\ \hline
      \end{tabular}
  \end{minipage}\hfill
\end{table}
}

\newcommand*{\fullref}[1]{\textit{\hyperref[{#1}]{\autoref*{#1} \nameref*{#1}}}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\DTMlangsetup[en-GB]{abbr,ord=omit,monthyearsep={\space}}

\RequirePackage[
breaklinks=true,colorlinks=true,
linkcolor=.,urlcolor=black,citecolor=black,
bookmarks=true,bookmarksopenlevel=2]{hyperref}

\setstocksize{297mm}{210mm}
\settrimmedsize{297mm}{210mm}{*}
\settrims{0pt}{0pt}
\settypeblocksize{225mm}{160mm}{*}
\setlrmargins{*}{*}{*}
\setulmargins{*}{*}{*}
\setheadfoot{20mm}{15mm}
\setmarginnotes{-182mm}{1mm}{1mm}
\checkandfixthelayout

\setlength{\parindent}{0pt}

\pretolerance=5000
\tolerance=9000 
\emergencystretch=0pt
\righthyphenmin=4
\lefthyphenmin=4

\chapterstyle{bianchi}
\setsecheadstyle{\Large\bfseries\sffamily\raggedright}
\setsubsecheadstyle{\large\bfseries\sffamily\raggedright}
\setsubsubsecheadstyle{\bfseries\sffamily\raggedright}
\setafterparaskip{1ex}

\addtopsmarks{plain}{}{ 
  \createmark{chapter}{left}{nonumber}{}{} 
  \createmark{section}{right}{nonumber}{}{} 
} 

\pagestyle{plain}
\makepagestyle{plain}
\makeoddfoot{plain}{\rule{\textwidth}{1pt}\\\today}{}{\rev}
\makeoddhead{plain}{\headerformat}



\maxsecnumdepth{subsubsection} 
\maxtocdepth{subsubsection}

\newcommand{\startmanual}{

\thispagestyle{empty}

{%%%

\centering
\Large

~\vspace{\fill}

{\huge
  \textbf{ 
    \includegraphics[max height=10cm,max width=8cm]{styles/logo.png}\\
    \vspace{1.5cm}
    \MakeUppercase{\docsubject}
}
}

\vspace{2.5cm}

{\LARGE
\MakeUppercase{\doctitle}
}

\vspace{3.5cm}

\coverdesc

\medskip

\vspace{\fill}

\today

%%%
}%%%

\cleardoublepage
%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%
%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%

\tableofcontents*

\clearpage

%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%
%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%---%%%

}

